<mat-toolbar color="primary">
  <button
    mat-icon-button
    class="example-icon"
    aria-label="Example icon-button with menu icon"
    (click)="drawer.toggle()"
  >
    <mat-icon>menu</mat-icon>
  </button>
  <span>Hair Salon</span>
  <span class="example-spacer"></span>
  <button mat-icon-button class="example-icon" aria-label="Notifications">
    <mat-icon matBadge="15" matBadgeColor="warn">notifications</mat-icon>
  </button>
  <button
    mat-icon-button
    class="example-icon"
    [matMenuTriggerFor]="menu"
  >
    <mat-icon>account_circle</mat-icon>
  </button>

  <mat-menu #menu="matMenu">

    <button mat-menu-item>Rejestracja</button>
    <button mat-menu-item>Logowanie</button>
    <button mat-menu-item>Moje konto</button>
    <mat-divider></mat-divider>
    <button mat-menu-item [matMenuTriggerFor]="settings">Ustawienia</button>

  </mat-menu>

  <mat-menu #settings="matMenu">
    <mat-slide-toggle
      class="example-margin"
      color="primary"
      [(ngModel)]="sidenavOpened"
      (toggleChange)="toggleSettings()"
      (click) = "$event.stopPropagation()"
      [disabled]="false">
        <span class="menu-settings-item">Menu zawsze widoczne</span>
    </mat-slide-toggle>
  </mat-menu>

</mat-toolbar>

<mat-drawer-container class="example-container" autosize>
  <mat-drawer #drawer class="example-sidenav" mode="side" [opened]="sidenavOpened">
    <mat-tree
      [dataSource]="dataSource"
      [treeControl]="treeControl"
      class="example-tree"
    >
      <mat-tree-node
        *matTreeNodeDef="let node"
        matTreeNodeToggle
        [ngClass]="{ 'menu-item-active': activeNode === node }"
      >
        <ng-container *ngIf="!node.external">
          <a [routerLink]="[node.url]" routerLinkActive="active-link" (isActiveChange)="onRouterLinkActive(node)">
            <button mat-icon-button>
              <mat-icon>{{ node.icon ? node.icon : 'insert_drive_file' }}</mat-icon>
            </button>
            {{ node.name }}
          </a>
        </ng-container>
        <ng-container *ngIf="node.external">
          <a href="{{ node.url }}">
            <button mat-icon-button>
              <mat-icon>launch</mat-icon>
            </button>
            {{ node.name }}
          </a>
        </ng-container>
      </mat-tree-node>
      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
        <div class="mat-tree-node" matTreeNodeToggle>
          <button mat-icon-button>
            <mat-icon>link</mat-icon>
          </button>
          <span class="group-name">{{ node.name }}</span>
          <button
            mat-icon-button
            [attr.aria-label]="'Toggle ' + node.name"
            class="chevron"
          >
            <mat-icon class="mat-icon-rtl-mirror">
              {{
                treeControl.isExpanded(node) ? "expand_more" : "chevron_right"
              }}
            </mat-icon>
          </button>
        </div>
        <div
          [class.example-tree-invisible]="!treeControl.isExpanded(node)"
          role="group"
        >
          <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>
  </mat-drawer>

  <mat-card class="full-height main-card">
    <div class="main-card-title-wrapper">
      <mat-card-title class="main-card-title">{{ activeNode?.title ? activeNode?.title : activeNode?.name ? activeNode?.name : title }}</mat-card-title>
    </div>

    <div class="main-card-content-wrapper">
      <router-outlet></router-outlet>
    </div>
  </mat-card>
</mat-drawer-container>
